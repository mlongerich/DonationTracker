# Production Environment Configuration Template
# Donation Tracker Application
#
# IMPORTANT: This is a template file. DO NOT commit actual credentials to git.
#
# Installation:
#   1. Copy this file to the production server:
#      /var/www/donation-tracker/donation_tracker_api/.env.production
#   2. Fill in all values with actual production credentials
#   3. Set proper permissions: chmod 600 .env.production
#   4. Ensure ownership: chown deploy:deploy .env.production

# ============================================================================
# Rails Environment
# ============================================================================
RAILS_ENV=production
RACK_ENV=production

# ============================================================================
# Database Configuration
# ============================================================================
# PostgreSQL connection URL
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://donation_tracker:CHANGE_ME_DB_PASSWORD@localhost/donation_tracker_production

# Alternative: Set individual database credentials
# DONATION_TRACKER_API_DATABASE_PASSWORD=CHANGE_ME_DB_PASSWORD

# ============================================================================
# Rails Security
# ============================================================================
# Generate with: rails secret
SECRET_KEY_BASE=CHANGE_ME_GENERATE_WITH_RAILS_SECRET

# JWT token secret (for authentication)
# Generate with: rails secret
JWT_SECRET_KEY=CHANGE_ME_GENERATE_WITH_RAILS_SECRET

# ============================================================================
# CORS Configuration
# ============================================================================
# Frontend URL for CORS (no trailing slash)
CORS_ALLOWED_ORIGINS=https://donations.projectsforasia.com
FRONTEND_URL=https://donations.projectsforasia.com

# ============================================================================
# Google OAuth2 (see TICKET-136)
# ============================================================================
# Get these from Google Cloud Console:
# https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=CHANGE_ME_YOUR_GOOGLE_CLIENT_ID
GOOGLE_CLIENT_SECRET=CHANGE_ME_YOUR_GOOGLE_CLIENT_SECRET

# ============================================================================
# Puma Configuration
# ============================================================================
# Number of Puma workers (set to CPU cores, typically 2-4)
WEB_CONCURRENCY=2

# Number of threads per worker (3-5 for most Rails apps)
RAILS_MAX_THREADS=5

# Port for Puma to listen on
PORT=3001

# PID file location
PIDFILE=/var/www/donation-tracker/donation_tracker_api/tmp/pids/puma.pid

# ============================================================================
# Logging
# ============================================================================
# Log level: debug, info, warn, error, fatal
RAILS_LOG_LEVEL=info

# Enable SQL query logging in production (set to false for performance)
RAILS_LOG_TO_STDOUT=true

# ============================================================================
# Future: Stripe Integration (not yet implemented)
# ============================================================================
# STRIPE_PUBLISHABLE_KEY=pk_live_...
# STRIPE_SECRET_KEY=sk_live_...
# STRIPE_WEBHOOK_SECRET=whsec_...

# ============================================================================
# Future: Email Configuration (not yet implemented)
# ============================================================================
# SMTP_ADDRESS=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_USERNAME=apikey
# SMTP_PASSWORD=CHANGE_ME_SENDGRID_API_KEY
# SMTP_DOMAIN=projectsforasia.com
# SMTP_FROM=noreply@projectsforasia.com

# ============================================================================
# Optional: Error Tracking (Honeybadger, Sentry, etc.)
# ============================================================================
# HONEYBADGER_API_KEY=CHANGE_ME_HONEYBADGER_KEY

# ============================================================================
# Optional: Performance Monitoring (New Relic, Scout, etc.)
# ============================================================================
# NEW_RELIC_LICENSE_KEY=CHANGE_ME_NEW_RELIC_KEY
# NEW_RELIC_APP_NAME=DonationTracker

# ============================================================================
# SECURITY CHECKLIST
# ============================================================================
# Before going live, verify:
# ✓ All CHANGE_ME values replaced with actual credentials
# ✓ SECRET_KEY_BASE generated with 'rails secret'
# ✓ JWT_SECRET_KEY generated with 'rails secret'
# ✓ Database password is strong (16+ characters, mixed case, numbers, symbols)
# ✓ Google OAuth credentials match production domain
# ✓ CORS_ALLOWED_ORIGINS matches production domain exactly
# ✓ File permissions set: chmod 600 .env.production
# ✓ File ownership set: chown deploy:deploy .env.production
# ✓ This template file (.env.production.example) not copied to production
# ✓ Actual .env.production file NOT committed to git
